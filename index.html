<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="stylesheet" href="style.css">
        <script src="script.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="data-table-container">
                <table id="dataTableID" class="table-striped table-hover table-bordered">
                    <thead>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Random Number</th>
                        <th>Random String</th>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <br>
            <br>
            <br>
            <div class="data-table-container">
                <table id="dataTablev2ID" class="table-striped table-hover table-bordered">
                    <thead>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Random Number</th>
                        <th>Random String</th>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
        <script>
            const newDataTable = new DataTable({
                id: 'dataTableID',
                dataFile: 'data-table.php',
                perPageDefault: 20,
                perPageSelector: true,
                perPageOptions: [ 5, 10, 20, 50, 100 ],
                searchBox: true,
                searchBoxContainerID: null,
                columnSelector: {
                    name: 'Select Columns'
                },
                tooManyUseInput: false,
                colFormat: (col_id, row_data) => {
                    if(col_id == 2) return `<a href="mailto:${row_data[col_id]}">${row_data[col_id]}</a>`;
                    else if(col_id == 3) return `<div contenteditable="true">${row_data[col_id]}</div>`;
                },
                // Table Row is created
                rowCreated: (row, data) => {
                    // We get the div in the column that we have set the contenteditable to
                    const el = row.querySelector('[contenteditable="true"]');
                    // We add it some events
                    el.addEventListener('focus', (e) => el.setAttribute('old-text', el.innerText));
                    el.addEventListener('focusout', (e) => {
                        if(e.currentTarget.innerText !== e.currentTarget.getAttribute('old-text')) console.log(e.currentTarget);
                        e.currentTarget.setAttribute('old-text', '');
                    });
                },
                initComplete: (data) => {
                    //console.log(data);
                },
                error: (err) => {
                    console.error(err);
                }
            });
            
            const newDataTablev2 = new DataTable({
                id: 'dataTablev2ID',
                dataFile: 'data-table-v2.php',
                perPageDefault: 5,
                perPageSelector: false,
                sql_cols: [ 'id', 'name', 'email', 'random_num', 'random_string' ],
                sql_from: 'test_table',
                sql_join: '',
                searchBox: true,
                sql_where: '',
                tooManyUseInput: false,
                colFormat: (col_id, row_data) => {
                    if(col_id == 1) return `<div style="color: red; text-align: center">${row_data[col_id]}</div>`;
                },
                rowCreated: (row, data) => {
                    //console.log('row created');
                },
                initComplete: (data) => {
                    //console.log(data);
                },
                error: (err) => {
                    console.error(err);
                }
            });
        </script>
    </body>
</html>